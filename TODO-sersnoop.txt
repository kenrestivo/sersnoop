TODO- serial snooper

ok, go for it: add in the network code! now i have something like net2tty
	figure out the command-line options
	roll in the code (should be easy)
	test with standard terminal shit
		btw read telnet rfc's

make the debug code optional? so i can run it as a daemon?
	essentially, make all the display.c shit DPRINTF level 1
		and all the other diagnostics DPRINTF level 2+
	finally, daemonize it.

----------------
STUCK

should i be using O_NDELAY on tty when i'm using select/poll?? good idea?
	STUCK: read up on this

----------------
BELOW THE LINE

	some way to keep track of hup's, pts's open/closed, tty's open/closed
		i.e at least print an informative message
		and when in network/daemon mode, connect only when pty opens

	select/poll doesn't work with ptmx's on linux. wtf?
		STUCK: find docs on devpts/ptmx interface on linux, and how it works
				or look in openssh source, for examples

	try termtest on netbsd
		STUCK: need to fix some of the includes/ifdefs/defines

----------------
NOWHERE

deal with the writing now.
	shall i select for write? hmm... could get tricky...
		NOWHERE: not needed, i don't think
	try it on netbsd? NOWHERE: same problem
	try the oldskool berkeley shit instead?
		it fixes the crash at basic read
		ack. that's borken too
	re-read unix book on terminals NOTHING there on ptmx?
	try putting signal handlers in NOWHERE. still broken
----------------
DONE

		ack! /usr/include/asm/ioctls.h. uses TIOCGPTN not TIOCGNAME i.e. SYSV
set up and open tty
	lift from chotplay/src/tty.c
		DONE
set up and open pty
	lift from termtest
	use only the linux version, for now anyway.
		DONE

write a simple poll/select loop to read from both/either
	there's one in sockclient/server isn't there? DONE

	try select instead
		SOLUTION! it works!
try poll...again... with & not ==
	SOLUTION: that was it! i just copied the select code, changed to poll, all's good

ack. the poll is broken. but raw reads work just fine.
	look at openssh?
		SOLUTION: just looked in orielly book. simple change

baud setting looks alllll goooodd
		ack, garbage chars, or something wrong. readcount is too long!
			SOLUTION: it includes cr/lf, AND it's not null-terminated. duh.
	get %*s going or snprintf or something
		SOLUTION: done
	do some isprint() shit. DONE
		hmm. some constipation. my while() read loop?
			SOLUTION: no while
hmm. shall i read until done, or just grab one chunk?
	look around at other code
		SOLUTION: nope. no while, just an if

start the writing/reading. 
	make sure it works, and works well.
		well, it does, dammit!
	some static var, who was talking last, so if it changes, i print that?
		cool. but... the totals don't look quite yet
			SOLUTION: sequence is important ;-)
add in the decoding/printing
	lift from xxd? ;-) at least read it
		DONE. it's not perfect, or even nice, but it works

